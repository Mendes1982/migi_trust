<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MIGI Trust Hub ‚Äî Sua reputa√ß√£o, protegida</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <script>
    window.PRIVY_APP_ID = "SEU_PRIVY_APP_ID_AQUI";
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@privy-io/privy-browser@latest/dist/index.umd.js"></script>
  <style>
    :root {
      --bg: #0a0a0f; --surface: #13131a; --border: #1e1e2e;
      --accent: #00e5a0; --accent2: #0066ff; --text: #f0f0f0;
      --muted: #6b6b80; --danger: #ff4560;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: var(--bg); color: var(--text); font-family: 'DM Sans', sans-serif; min-height: 100vh; overflow-x: hidden; }
    body::before { content: ''; position: fixed; top: -200px; left: -200px; width: 600px; height: 600px; background: radial-gradient(circle, rgba(0,229,160,0.07) 0%, transparent 70%); pointer-events: none; }
    body::after { content: ''; position: fixed; bottom: -200px; right: -200px; width: 600px; height: 600px; background: radial-gradient(circle, rgba(0,102,255,0.07) 0%, transparent 70%); pointer-events: none; }
    header { display: flex; align-items: center; justify-content: space-between; padding: 20px 40px; border-bottom: 1px solid var(--border); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; background: rgba(10,10,15,0.8); }
    .logo { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.4rem; letter-spacing: -0.5px; }
    .logo span { color: var(--accent); }
    .user-info { display: flex; align-items: center; gap: 12px; font-size: 0.9rem; color: var(--muted); }
    .user-badge { background: var(--surface); border: 1px solid var(--border); padding: 6px 14px; border-radius: 20px; font-size: 0.85rem; }
    .btn-logout { background: transparent; border: 1px solid var(--border); color: var(--muted); padding: 6px 14px; border-radius: 20px; cursor: pointer; font-size: 0.85rem; transition: all 0.2s; }
    .btn-logout:hover { border-color: var(--danger); color: var(--danger); }
    .hero { text-align: center; padding: 100px 20px 60px; animation: fadeUp 0.8s ease both; }
    .hero-tag { display: inline-block; background: rgba(0,229,160,0.1); border: 1px solid rgba(0,229,160,0.3); color: var(--accent); padding: 6px 16px; border-radius: 20px; font-size: 0.8rem; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 24px; }
    h1 { font-family: 'Syne', sans-serif; font-size: clamp(2.2rem, 6vw, 4rem); font-weight: 800; line-height: 1.1; margin-bottom: 20px; letter-spacing: -1px; }
    h1 em { font-style: normal; background: linear-gradient(90deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .hero p { color: var(--muted); font-size: 1.1rem; max-width: 500px; margin: 0 auto 40px; line-height: 1.7; }
    #login-section { animation: fadeUp 0.8s 0.2s ease both; }
    .btn-google { display: inline-flex; align-items: center; gap: 12px; background: var(--text); color: #111; font-family: 'DM Sans', sans-serif; font-weight: 500; font-size: 1rem; padding: 14px 28px; border-radius: 12px; border: none; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 20px rgba(255,255,255,0.1); }
    .btn-google:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(255,255,255,0.15); }
    .btn-google svg { width: 20px; height: 20px; }
    .login-note { margin-top: 14px; font-size: 0.82rem; color: var(--muted); }
    .login-note span { color: var(--accent); }
    #dashboard { display: none; max-width: 900px; margin: 0 auto; padding: 40px 20px 80px; animation: fadeUp 0.5s ease both; }
    .score-card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 40px; text-align: center; margin-bottom: 30px; position: relative; overflow: hidden; }
    .score-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--accent), var(--accent2)); }
    .score-label { font-size: 0.85rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 12px; }
    .score-number { font-family: 'Syne', sans-serif; font-size: 5rem; font-weight: 800; background: linear-gradient(90deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1; }
    .score-desc { color: var(--muted); margin-top: 10px; font-size: 0.9rem; }
    .wallet-info { background: rgba(0,229,160,0.05); border: 1px solid rgba(0,229,160,0.2); border-radius: 10px; padding: 10px 16px; font-size: 0.82rem; color: var(--accent); margin-top: 20px; word-break: break-all; display: flex; align-items: center; gap: 8px; justify-content: center; }
    .wallet-dot { width: 8px; height: 8px; background: var(--accent); border-radius: 50%; flex-shrink: 0; animation: pulse 2s infinite; }
    .section-title { font-family: 'Syne', sans-serif; font-size: 1.3rem; font-weight: 700; margin-bottom: 20px; }
    .pix-card { background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 32px; margin-bottom: 30px; }
    .plans { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px; }
    .plan { border: 2px solid var(--border); border-radius: 14px; padding: 20px; cursor: pointer; transition: all 0.2s; position: relative; }
    .plan:hover { border-color: var(--accent); }
    .plan.selected { border-color: var(--accent); background: rgba(0,229,160,0.05); }
    .plan.popular::before { content: 'Popular'; position: absolute; top: -10px; right: 14px; background: var(--accent); color: #000; font-size: 0.7rem; font-weight: 700; padding: 2px 10px; border-radius: 10px; text-transform: uppercase; }
    .plan-name { font-weight: 600; margin-bottom: 6px; }
    .plan-price { font-family: 'Syne', sans-serif; font-size: 1.6rem; font-weight: 800; }
    .plan-price small { font-size: 0.9rem; font-weight: 400; color: var(--muted); }
    .plan-desc { font-size: 0.82rem; color: var(--muted); margin-top: 6px; }
    .btn-pix { width: 100%; background: linear-gradient(135deg, var(--accent), #00c07a); color: #000; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1rem; padding: 16px; border-radius: 12px; border: none; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; }
    .btn-pix:hover { transform: translateY(-2px); filter: brightness(1.05); }
    .btn-pix:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
    #pix-result { display: none; background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 32px; text-align: center; margin-bottom: 30px; }
    #pix-result h3 { font-family: 'Syne', sans-serif; font-size: 1.2rem; margin-bottom: 8px; }
    #pix-result p { color: var(--muted); font-size: 0.9rem; margin-bottom: 20px; }
    .qr-placeholder { width: 200px; height: 200px; background: white; border-radius: 12px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; }
    .pix-code { background: var(--bg); border: 1px solid var(--border); border-radius: 10px; padding: 12px 16px; font-size: 0.75rem; color: var(--muted); word-break: break-all; text-align: left; margin-bottom: 14px; }
    .btn-copy { background: var(--surface); border: 1px solid var(--border); color: var(--text); padding: 10px 24px; border-radius: 10px; cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: 0.9rem; transition: all 0.2s; }
    .btn-copy:hover, .btn-copy.copied { border-color: var(--accent); color: var(--accent); }
    .timer { margin-top: 14px; font-size: 0.85rem; color: var(--muted); }
    .timer span { color: var(--accent); font-weight: 600; }
    .toast { position: fixed; bottom: 30px; right: 30px; background: var(--surface); border: 1px solid var(--accent); color: var(--text); padding: 14px 20px; border-radius: 12px; font-size: 0.9rem; box-shadow: 0 8px 30px rgba(0,0,0,0.4); transform: translateY(80px); opacity: 0; transition: all 0.3s; z-index: 999; }
    .toast.show { transform: translateY(0); opacity: 1; }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    .spinner { width: 18px; height: 18px; border: 2px solid rgba(0,0,0,0.3); border-top-color: #000; border-radius: 50%; animation: spin 0.7s linear infinite; display: none; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; margin: 60px auto; max-width: 900px; padding: 0 20px; animation: fadeUp 0.8s 0.4s ease both; }
    .feature { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 24px; }
    .feature-icon { font-size: 1.8rem; margin-bottom: 12px; }
    .feature h3 { font-family: 'Syne', sans-serif; font-weight: 700; margin-bottom: 6px; }
    .feature p { font-size: 0.85rem; color: var(--muted); line-height: 1.6; }
  </style>
</head>
<body>
<header>
  <div class="logo">MIGI<span>.</span>Trust</div>
  <div class="user-info" id="header-user" style="display:none;">
    <span class="user-badge" id="header-email">‚Äî</span>
    <button class="btn-logout" onclick="handleLogout()">Sair</button>
  </div>
</header>
<section class="hero" id="hero-section">
  <div class="hero-tag">‚ö° Powered by Solana</div>
  <h1>Sua reputa√ß√£o<br/>em quem <em>voc√™ √©</em>.</h1>
  <p>O MIGI Trust Hub cria um score de confian√ßa verificado, protegido por blockchain. Nenhuma senha de crypto. Nenhum jarg√£o t√©cnico.</p>
  <div id="login-section">
    <button class="btn-google" onclick="handleGoogleLogin()">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"/>
        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
      </svg>
      Entrar com Google
    </button>
    <p class="login-note">üîí Sem senha de crypto. Sua carteira √© criada <span>automaticamente</span>.</p>
  </div>
</section>
<div class="features" id="features-section">
  <div class="feature"><div class="feature-icon">üõ°Ô∏è</div><h3>Score de Confian√ßa</h3><p>Seu hist√≥rico de acordos constr√≥i uma reputa√ß√£o verific√°vel e port√°til.</p></div>
  <div class="feature"><div class="feature-icon">‚öñÔ∏è</div><h3>Justi√ßa Antifr√°gil</h3><p>Erros antigos perdem peso. Fraude e descuido s√£o tratados de forma diferente.</p></div>
  <div class="feature"><div class="feature-icon">üí∏</div><h3>Pagamento via Pix</h3><p>Carregue cr√©ditos ou assine o plano diretamente pelo Pix, sem complica√ß√£o.</p></div>
  <div class="feature"><div class="feature-icon">üåê</div><h3>Blockchain Invis√≠vel</h3><p>Toda a seguran√ßa da Solana sem voc√™ precisar saber o que √© uma wallet.</p></div>
</div>
<div id="dashboard">
  <div class="score-card">
    <div class="score-label">Seu FairScore</div>
    <div class="score-number" id="user-score">750</div>
    <div class="score-desc">Bom ‚Äî Continue construindo sua reputa√ß√£o</div>
    <div class="wallet-info"><div class="wallet-dot"></div><span id="wallet-address">Carregando carteira...</span></div>
  </div>
  <div class="pix-card">
    <div class="section-title">üí∏ Carregar Cr√©ditos via Pix</div>
    <div class="plans">
      <div class="plan" data-plan="starter" data-value="1990" onclick="selectPlan(this)"><div class="plan-name">Starter</div><div class="plan-price">R$19<small>,90</small></div><div class="plan-desc">100 cr√©ditos para valida√ß√µes</div></div>
      <div class="plan popular selected" data-plan="pro" data-value="4990" onclick="selectPlan(this)"><div class="plan-name">Pro</div><div class="plan-price">R$49<small>,90</small></div><div class="plan-desc">300 cr√©ditos + selo verificado</div></div>
      <div class="plan" data-plan="business" data-value="14990" onclick="selectPlan(this)"><div class="plan-name">Business</div><div class="plan-price">R$149<small>,90</small></div><div class="plan-desc">1.000 cr√©ditos + API access</div></div>
    </div>
    <button class="btn-pix" id="pix-btn" onclick="gerarPix()">
      <div class="spinner" id="pix-spinner"></div>
      <span id="pix-btn-text">‚ö° Gerar QR Code Pix</span>
    </button>
  </div>
  <div id="pix-result">
    <h3>üì± Escaneie o QR Code</h3>
    <p>O QR Code expira em <strong>30 minutos</strong>. Ap√≥s o pagamento, seus cr√©ditos s√£o adicionados automaticamente.</p>
    <div class="qr-placeholder" id="qr-container">
      <svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect width="160" height="160" fill="white"/>
        <rect x="10" y="10" width="60" height="60" fill="black"/><rect x="20" y="20" width="40" height="40" fill="white"/><rect x="30" y="30" width="20" height="20" fill="black"/>
        <rect x="90" y="10" width="60" height="60" fill="black"/><rect x="100" y="20" width="40" height="40" fill="white"/><rect x="110" y="30" width="20" height="20" fill="black"/>
        <rect x="10" y="90" width="60" height="60" fill="black"/><rect x="20" y="100" width="40" height="40" fill="white"/><rect x="30" y="110" width="20" height="20" fill="black"/>
        <rect x="90" y="90" width="10" height="10" fill="black"/><rect x="110" y="90" width="10" height="10" fill="black"/><rect x="130" y="90" width="10" height="10" fill="black"/>
        <rect x="90" y="110" width="10" height="10" fill="black"/><rect x="110" y="110" width="30" height="10" fill="black"/>
        <rect x="90" y="130" width="30" height="10" fill="black"/><rect x="130" y="120" width="10" height="20" fill="black"/>
      </svg>
    </div>
    <div class="pix-code" id="pix-code-text">C√≥digo Pix aparecer√° aqui...</div>
    <button class="btn-copy" id="copy-btn" onclick="copiarPix()">üìã Copiar c√≥digo Pix</button>
    <div class="timer">Expira em <span id="timer-count">30:00</span></div>
  </div>
</div>
<div class="toast" id="toast"></div>
<script src="https://js.stripe.com/v3/"></script>
<script>
  const BACKEND_URL = "https://api.easyautom.shop";
  let currentUser = null, currentWallet = null, selectedPlan = { plan: 'pro', value: 4990 }, timerInterval = null, privy = null;

  async function initPrivy() {
    if (!window.PrivyBrowser) return;
    try {
      privy = new window.PrivyBrowser.PrivyClient(window.PRIVY_APP_ID, { loginMethods: ['google', 'email'], appearance: { theme: 'dark', accentColor: '#00e5a0' } });
      const user = await privy.getUser().catch(() => null);
      if (user) onLoginSuccess(user);
    } catch (e) { console.warn("Privy:", e.message); }
  }

  async function handleGoogleLogin() {
    if (!privy) { showToast("‚ö†Ô∏è Configure seu Privy App ID"); simulateLogin(); return; }
    try { const { user } = await privy.login({ loginMethod: 'google' }); onLoginSuccess(user); }
    catch (err) { showToast("Erro: " + err.message); }
  }

  function onLoginSuccess(user) {
    currentUser = user;
    const email = user?.email?.address || user?.google?.email || "usuario@migi.io";
    const wallet = user?.wallet?.address || "DEMO_WALLET";
    document.getElementById('hero-section').style.display = 'none';
    document.getElementById('features-section').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
    document.getElementById('header-user').style.display = 'flex';
    document.getElementById('header-email').textContent = email;
    document.getElementById('wallet-address').textContent = 'üîë ' + (wallet.length > 12 ? wallet.slice(0,6)+'...'+wallet.slice(-4) : wallet);
    currentWallet = wallet;
    showToast("‚úÖ Bem-vindo ao MIGI Trust Hub!");
  }

  function simulateLogin() {
    setTimeout(() => onLoginSuccess({ email: { address: "demo@migi.io" }, wallet: { address: "7xKwD3aFnmPqR8vT1yZbN5cLmX9sEuJ6hQiAo2MtWe4" } }), 500);
  }

  async function handleLogout() {
    if (privy) await privy.logout().catch(() => {});
    currentUser = null; currentWallet = null;
    document.getElementById('hero-section').style.display = 'block';
    document.getElementById('features-section').style.display = 'grid';
    document.getElementById('dashboard').style.display = 'none';
    document.getElementById('header-user').style.display = 'none';
    document.getElementById('pix-result').style.display = 'none';
    clearInterval(timerInterval);
    showToast("üëã At√© logo!");
  }

  function selectPlan(el) {
    document.querySelectorAll('.plan').forEach(p => p.classList.remove('selected'));
    el.classList.add('selected');
    selectedPlan = { plan: el.dataset.plan, value: parseInt(el.dataset.value) };
  }

  async function gerarPix() {
    const btn = document.getElementById('pix-btn');
    const spinner = document.getElementById('pix-spinner');
    const btnText = document.getElementById('pix-btn-text');
    btn.disabled = true; spinner.style.display = 'block'; btnText.textContent = 'Gerando...';
    try {
      const response = await fetch(`${BACKEND_URL}/create-pix`, {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount: selectedPlan.value, plan: selectedPlan.plan, walletAddress: currentWallet })
      }).catch(() => null);
      if (response && response.ok) {
        const data = await response.json();
        mostrarQRCode(data.pixCode);
      } else {
        const demoCode = `00020126580014br.gov.bcb.pix013600000000-0000-0000-0000-000000000000520400005303986540${(selectedPlan.value/100).toFixed(2)}5802BR5913MIGI Trust Hub6009Sao Paulo62140510MIGI${Date.now()}6304ABCD`;
        mostrarQRCode(demoCode);
        showToast("‚ö†Ô∏è Modo demo ativo");
      }
    } catch (err) { showToast("Erro: " + err.message); }
    finally { btn.disabled = false; spinner.style.display = 'none'; btnText.textContent = '‚ö° Gerar Novo QR Code'; }
  }

  function mostrarQRCode(pixCode) {
    document.getElementById('pix-result').style.display = 'block';
    document.getElementById('pix-code-text').textContent = pixCode;
    document.getElementById('pix-result').scrollIntoView({ behavior: 'smooth' });
    clearInterval(timerInterval);
    let seconds = 1800;
    timerInterval = setInterval(() => {
      seconds--;
      const m = String(Math.floor(seconds/60)).padStart(2,'0');
      const s = String(seconds%60).padStart(2,'0');
      document.getElementById('timer-count').textContent = `${m}:${s}`;
      if (seconds <= 0) { clearInterval(timerInterval); document.getElementById('timer-count').textContent = 'Expirado'; showToast("‚è±Ô∏è QR Code expirado."); }
    }, 1000);
    showToast("‚úÖ QR Code gerado!");
  }

  function copiarPix() {
    navigator.clipboard.writeText(document.getElementById('pix-code-text').textContent).then(() => {
      const btn = document.getElementById('copy-btn');
      btn.textContent = '‚úÖ Copiado!'; btn.classList.add('copied');
      setTimeout(() => { btn.textContent = 'üìã Copiar c√≥digo Pix'; btn.classList.remove('copied'); }, 2000);
    });
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg; t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 3500);
  }

  window.addEventListener('DOMContentLoaded', initPrivy);
</script>
</body>
</html>
